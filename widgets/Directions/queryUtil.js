// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
define("dojo/Deferred esri/tasks/query esri/tasks/QueryTask jimu/LayerInfos/LayerInfos esri/geometry/Point esri/geometry/Polyline esri/geometry/Polygon esri/graphic esri/tasks/FeatureSet".split(" "),function(f,h,k,l,m,n,p,q,r){var d={queryBarriers:function(a){var b=[];if(!a||!a.barrierLayers)return b;var c=a.barrierLayers.pointLayers,e=a.barrierLayers.polylineLayers;a=a.barrierLayers.polygonLayers;this.layerInfosObj=l.getInstanceSync();d.getQueryDef(c,d.isBarrierLayerInWebmap(c,this.layerInfosObj),
this.layerInfosObj,"point",b);d.getQueryDef(e,d.isBarrierLayerInWebmap(e,this.layerInfosObj),this.layerInfosObj,"polyline",b);d.getQueryDef(a,d.isBarrierLayerInWebmap(a,this.layerInfosObj),this.layerInfosObj,"polygon",b);return b},isBarrierLayerInWebmap:function(a,b){var c=!1,e=a[0];b.traversal(function(a){a.layerObject.id===e&&(c=!0)});return c},getQueryDef:function(a,b,c,e,g){(a=a[0])&&b?(b=c.getLayerInfoById(a),c=b.layerObject,(a=c.url)?g.push(d.query(a)):!a&&"undefined"!==c.toJson&&c.toJson().featureSet&&
c.toJson().featureSet.features?(b=b.layerObject.toJson().featureSet.features,c=new r,"point"===e?c.features=d._getFeatures(b,m):"polyline"===e?c.features=d._getFeatures(b,n):"polygon"===e&&(c.features=d._getFeatures(b,p)),g.push((new f).resolve(c))):g.push((new f).resolve(null))):g.push((new f).resolve(null))},_getFeatures:function(a,b){for(var c=[],e=0,d=a.length;e<d;e++){var f=new q(new b(a[e].geometry),null,{BarrierType:0});c.push(f)}return c},query:function(a){a=new k(a);var b=new h;b.where="1\x3d1";
b.returnGeometry=!0;b.outFields=["*"];return a.execute(b)},haveSetPresetBarriers:function(a){return a.point||a.polyline||a.polygon?!0:!1}};return d});